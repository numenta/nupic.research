# ----------------------------------------------------------------------
# Numenta Platform for Intelligent Computing (NuPIC)
# Copyright (C) 2019, Numenta, Inc.  Unless you have an agreement
# with Numenta, Inc., for a separate license for this software code, the
# following terms and conditions apply:
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero Public License version 3 as
# published by the Free Software Foundation.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
# See the GNU Affero Public License for more details.
#
# You should have received a copy of the GNU Affero Public License
# along with this program.  If not, see http://www.gnu.org/licenses.
#
# http://numenta.org/licenses/
# ----------------------------------------------------------------------

[DEFAULT]
# AWS sync
# Uncomment to upload results on S3
upload_dir = "s3://jgordon/ray/results"
sync_function = "aws s3 sync `dirname {local_dir}` {remote_dir}/`basename $(dirname {local_dir})`"

# Set to 'True' to save/restore the model on every iteration and repetition
restore_supported = True

experiment = grid
path = ~/nta/results
data_dir = ~/nta/datasets

# Data
input_shape = (1, 28, 28)
dataset = MNIST

# Common network parameters
m_groups = 200
n_cells_per_groups = 6
k_winners = 25
gamma = 0.5
eps = 0.0

iterations = 200
repetitions = 1
batch_size = 128
batches_in_epoch = 100
learning_rate = 0.001
learning_rate_gamma = 0.1
momentum = 0.9
lr_step_schedule = [20, 40, 60]
optimizer=sgd
save_onnx_graph_at_checkpoint = False

stop = {"stop": 1}
checkpoint_at_end = True

[RSM_MNIST_Paper]
sequences = [[0, 1, 2, 3]]
optimizer = adam
learning_rate = 0.0005
lr_step_schedule = None
batch_size = 300

[RSM_Local]
sequences = [[0, 1, 2, 3]]
batch_size = 64
batches_in_epoch = 30
checkpoint_freq = 10
save_onnx_graph_at_checkpoint = False
optimizer = adam
learning_rate = 0.0005
lr_step_schedule = None

